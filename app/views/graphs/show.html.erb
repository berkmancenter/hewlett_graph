<div id="graph">
    <div id="data" style="display: none;">
        <span class="inline"><dt>Category</dt><dd id="category"></dd></span>
        <span class="inline"><dt>Subcategory</dt><dd id="subcategory"></dd></span>
        <span class="inline"><dt>Stakeholders</dt><dd id="stakeholders"></dd></span>
        <dt>Idea</dt><dd id="idea"></dd>
    </div>
</div>
<div id="notGraph">
    <div id="controls">
        <h2>Sort by:</h2>
        <ul>
            <li><input type="radio" name="sort" id="sortCat" value="category" checked="checked" /><label for="sortCat">Category</label></li>
            <li><input type="radio" name="sort" id="sortSubcat" value="subcategory" /><label for="sortSubcat">Subcategory</label></li>
            <li><input type="radio" name="sort" id="sortStake" value="stakeholders" /><label for="sortStake">Stakeholder</label></li>
            <li><input type="radio" name="sort" id="sortDay" value="day" /><label for="sortDay">Day</label></li>
        </ul>
        <h2>Color by:</h2>
        <ul>
            <li><input type="radio" name="color" id="colorCat" value="category" checked="checked" /><label for="colorCat">Category</label></li>
            <li><input type="radio" name="color" id="colorSubcat" value="subcategory" /><label for="colorSubcat">Subcategory</label></li>
            <li><input type="radio" name="color" id="colorDay" value="day" /><label for="colorDay">Day</label></li>
        </ul>
        <input type="checkbox" name="showLabels" id="showLabels" /><label for="showLabels">Hide Labels</label><br />
        <input type="checkbox" name="veryDiffSubcatColors" id="veryDiffSubcatColors" /><label for="veryDiffSubcatColors">Very Different Subcategory Colors</label>
    </div>
    <div id="legend">
        <h2>Legend</h2>
    </div>
</div>
<script> 
    var sortAttr = '<%= params[:sort_attr] or "category" %>', colorAttr = '<%= params[:color_attr] or "category" %>',
        oldSortAttr = '<%= params[:sort_attr] or "category" %>', oldColorAttr = '<%= params[:color_attr] or "category" %>';
    var slowJs = false;
    $.getJSON('/graphs/<%= @graph.id %>.json', doEverything);
    if (slowJs) {
        reorganizePercent = 0.2;
        theta = 0.8;
        $("input[type=radio]").on("change", function(e) {
            $.get('/graphs/<%= @graph.id %>', { sort_attr: $('input[name=sort]:checked').val(), color_attr: $('input[name=color]:checked').val() }, replaceSVG, 'html');
        });
    }
</script>
