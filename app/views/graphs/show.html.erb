<div id="graph">
    <div id="data" style="display: none;">
        <a href="#"><div id="dataClose">X</div></a>
        <span class="inline"><dt>Category</dt><dd id="category"></dd></span>
        <span class="inline"><dt>Subcategory</dt><dd id="subcategory"></dd></span>
        <span class="inline"><dt>Stakeholders</dt><dd id="stakeholders"></dd></span>
        <dt>Idea</dt><dd id="idea"></dd>
    </div>
</div>
<div id="notGraph">
    <div class="panel" id="legend">
        <h2>Legend</h2>
    </div>
    <% if @graph.questions %>
    <div class="panel" id="questions">
        <h2>Questions</h2>
        <ul>
            <%= render :partial => 'shared/line_items/question', :collection => @graph.questions %>
        </ul>
    </div>
    <% end %>
    <div class="panel" id="controls">
        <h2>Advanced</h2>
        <h3>Sort by:</h3>
        <ul>
            <li><input type="radio" name="sort" id="sortCat" value="category" checked="checked" /><label for="sortCat">Category</label></li>
            <li><input type="radio" name="sort" id="sortSubcat" value="subcategory" /><label for="sortSubcat">Subcategory</label></li>
            <li><input type="radio" name="sort" id="sortStake" value="stakeholders" /><label for="sortStake">Stakeholder</label></li>
            <li><input type="radio" name="sort" id="sortDay" value="day" /><label for="sortDay">Day</label></li>
        </ul>
        <h3>Color by:</h3>
        <ul>
            <li><input type="radio" name="color" id="colorCat" value="category" checked="checked" /><label for="colorCat">Category</label></li>
            <li><input type="radio" name="color" id="colorSubcat" value="subcategory" /><label for="colorSubcat">Subcategory</label></li>
            <li><input type="radio" name="color" id="colorDay" value="day" /><label for="colorDay">Day</label></li>
        </ul>
        <h3>Browser Speed:</h3>
        <ul>
            <li><input type="radio" name="speed" id="speedFast" value="fast" /><label for="speedFast">Fast</label></li>
            <li><input type="radio" name="speed" id="speedMedium" value="medium" /><label for="speedMedium">Medium</label></li>
            <li><input type="radio" name="speed" id="speedSlow" value="slow" /><label for="speedSlow">Slow</label></li>
        </ul>
        <input type="checkbox" name="hideLabels" id="hideLabels" /><label for="hideLabels">Hide Labels</label><br />
        <input type="checkbox" name="veryDiffSubcatColors" id="veryDiffSubcatColors" /><label for="veryDiffSubcatColors">Very Different Subcategory Colors</label><br />
    </div>
</div>
<% if params[:layout] == 'tree' %>
<style>
    #controls, #questions {
        display: none;
    }
    .legendEntry {
        display: inline-block;
        margin: 0 1em;
    }
    #notGraph {
        display: block;
        text-align: center;
    }
    #legend {
        display: inline-block;
    }
</style>
<% end %>
<script> 
    Graph.id = <%= @graph.id %>;
    Graph.config.sortAttr = '<%= params[:sort_attr] or "category" %>';
    Graph.config.colorAttr = '<%= params[:color_attr] or "category" %>';
    Graph.config.oldSortAttr = '<%= params[:sort_attr] or "category" %>';
    Graph.config.oldColorAttr = '<%= params[:color_attr] or "category" %>';
    Graph.config.browserSpeed =  '<%= params[:browser_speed] or "medium" %>';
    Graph.config.layout =  '<%= params[:layout] or "density" %>';
    Graph.init();
</script>
